<!-- OOPS department and subject are the same... -->
{% load static %}

<div class="course-table-container">
  <table class="course-table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Department</th>
        <th>Instructor</th>
        <th>Term</th>
        <th>Response Rate</th>
        <th>Course Mean</th>
        <th>URL</th>
      </tr>
    </thead>
    <tbody>
      {% for course in courses %}
      <tr>
        <td>{{ course.title }}</td>
        <td>{{ course.department }}</td>
        <td>{{ course.instructor.name }}</td>
        <td>{{ course.term }}</td>
        <td>{{ course.response_rate }}</td>
        <td>
          {% with feedback_table=course.feedback_tables.first %}
          {% if feedback_table %}
          {% with entry=feedback_table.entries.first %}
          {{ entry.course_mean|default:"N/A" }}
          {% endwith %}
          {% endif %}
          {% endwith %}
        </td>
        <td><a href="{{ course.url }}" target="_blank">Link</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>